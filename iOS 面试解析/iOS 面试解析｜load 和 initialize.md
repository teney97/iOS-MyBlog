## iOS 面试解析｜load 和 initialize 

本期讲解 load 和 initialize 的相关知识点。

### load 和 initialize 的区别

| 区别     | load                                                         | initialize                                                   |
| -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 调用时刻 | 在 `Runtime` 加载类、分类时调用<br>（不管有没有用到这些类，在程序运行起来的时候都会加载进内存，并调用 `load` 方法）。<br><br>每个类、分类的 `load`，在程序运行过程中只调用一次（除非开发者手动调用）。 | 在`类`第一次接收到消息时调用。<br><br>如果子类没有实现 `initialize` 方法，会调用父类的 `initialize`，所以父类的 `initialize` 方法可能会被调用多次，但不代表父类初始化多次，每个类只会初始化一次。 |
| 调用方式 | ① 系统自动调用 `load` 方式为直接通过函数地址调用；<br>② 开发者手动调用 `load` 方式为消息机制 `objc_msgSend` 函数调用。 | 消息机制 `objc_msgSend` 函数调用。                           |
| 调用顺序 | ① 先调用类的 `load`，按照编译先后顺序调用（先编译，先调用），调用子类的 `load` 之前会先调用父类的 `load`；<br>② 再调用分类的 `load`，按照编译先后顺序调用（先编译，先调用）（注意：通过消息机制调用分类方法是：后编译，优先调用）。 | ① 先调用父类的 `initialize`<br>② 再调用子类的 `initialize`<br>（先初始化父类，再初始化子类）。 |

### 手动调用子类的 load 方法，但是子类没有实现该方法，会怎样？

* `load` 方法可以继承，手动调用 `load` 的方式是通过消息机制调用，先查找子类是否实现了 `load` 方法，由于子类没有实现，就会去查找父类，如果父类实现了 `load` 方法则调用，否则继续逐级查找；
* 如果父类的分类实现了 `load` 方法，那么会调用分类的，因为分类方法会“覆盖”同名宿主类方法；
* 如果存在多个父类的分类都实现了 `load` 方法的话，那么会调用最后参与编译的分类的 `load` 方法。